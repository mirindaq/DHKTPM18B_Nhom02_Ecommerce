groups:
  - name: critical_alerts
    interval: 10s
    rules:
      - alert: Backend5xxError
        expr: |
          increase(http_server_requests_seconds_count{status=~"5..", application="Ecommerce Backend"}[30s]) > 0
        for: 0s
        labels:
          severity: critical
          service: backend
          priority: immediate
        annotations:
          summary: "üî¥ Backend c√≥ l·ªói 5xx - C·∫ßn x·ª≠ l√Ω ngay!"
          description: "Backend service v·ª´a tr·∫£ v·ªÅ l·ªói 5xx (instance: {{ $labels.instance }}, uri: {{ $labels.uri }}, status: {{ $labels.status }}, method: {{ $labels.method }})"

      - alert: HighMemoryUsage
        expr: |
          (
            1 - (node_memory_MemAvailable_bytes / node_memory_MemTotal_bytes)
          ) * 100 > 50
        for: 1m
        labels:
          severity: warning
          service: system
          priority: high
        annotations:
          summary: "‚ö†Ô∏è RAM server ƒëang cao"
          description: "Server ƒëang s·ª≠ d·ª•ng {{ $value | humanize }}% RAM trong 1 ph√∫t (instance: {{ $labels.instance }})"
